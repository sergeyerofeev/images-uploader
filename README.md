# Images uploader JavaScript module

Данный модуль предназначен для последовательной загрузки изображений с сервера по мере того как пользователь просматривает страницу. При этом страница не перегружена изображениями, имеет малый вес и высокую скорость загрузки.

## Описание

Все изображения на странице заменены на "макеты". "Макет" в данном случае это прозрачное однопиксельное gif изображение в формате BASE64, которое записываем как: 
```
    R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==
```
При прокрутке страницы срабатывает обработчик события scroll, который проверяет появилось ли изображение в области просмотра, если да, то происходит замена "макета" на URL файла изображения, которой содержится в атрибуте "data-src" тега img, затем атрибут "data-src" удаляется. После того как все изображения будут загружены обработчик события scroll удаляется.

При начальной загрузке HTML и построении DOM-дерева возникает событие DOMContentLoaded, в обработчике которого происходит начальный расчёт размеров "макета", в соответствии с размерами окна браузера и реальными размерами изображения указанными в атрибуте "data-dimensions". Вычисленные значения width и height прописываются в style тега img. Это необходимо для того, чтобы при подстановке реального изображения, окружающий контент не прыгал из-за разницы размеров "макета" и загружаемого изображения. 
Дополнительно в обработчике события DOMContentLoaded производится проверка видно ли уже изображения в окне браузера, если да, то подставляем URL файла изображения из атрибута "data-src" в атрибут "src" тега img. После этих действий обработчик события DOMContentLoaded удаляем.

Если на каком-то этапе просмотра страницы пользователь изменил разрешение экрана, срабатываем обработчик события resize, в котором производится перерасчёт размеров "макетов" и изображений.

### Подключение скрипта

``` html
    <script src="js/imagesUploader.min.js"></script>
```
### Использование

В HTML коде прописываем тег img c двумя пользовательскими атрибутами `data-src` и `data-dimensions`:
``` html    
<img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" 
data-src="images/espresso1.jpg" data-dimensions="475 317">
```    
+ В `data-src` находится URL файла изображения.
+ В `data-dimensions`="width height" действительные размеры загружаемого изображения. Ширина и высота через пробел без размерности.
+ Тег `src` содержит "макет", который в дальнейшем будет заменён на данные из атрибута `data-src`. 
